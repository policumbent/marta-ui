(this.webpackJsonpmarta=this.webpackJsonpmarta||[]).push([[44],{818:function(e,t,a){"use strict";a.r(t);var n=a(564),l=a(140),s=a(141),i=a(143),r=a(142),c=a(2),o=a.n(c),m=a(552),u=a(553),d=a(555),p=a(557),h=a(559),E=a(592),g=a(556),f=a(579),v=a(146),b=(a(748),a(749),{type:"info",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],width:300,dismiss:{duration:2500,onScreen:!0,pauseOnHover:!0,showIcon:!0}}),y=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).toggle=function(){s.setState({collapse:!s.state.collapse})},s.toggleButton=function(){v.store.addNotification(Object(n.a)({},b,{title:"State",message:"Aggiornato lo status",type:"success"})),s.props.reloadStatus()},s.state={status:"",collapse:!1},s}return Object(s.a)(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(){this.updateStatus()}},{key:"componentDidMount",value:function(){this.updateStatus()}},{key:"updateStatus",value:function(){var e=JSON.parse(JSON.stringify(this.props.state)),t=JSON.parse(JSON.stringify(this.props.settings));delete e.dest,delete e.type,delete t.dest,delete t.type;var a=JSON.stringify(e,null,1).replace(/\{|\}|"|,|/g,"").replace("\n",""),n=JSON.stringify(t,null,1).replace(/\{|\}|"|,/g,"");this.setState({status:a+n})}},{key:"render",value:function(){return o.a.createElement(d.a,null,o.a.createElement(p.a,null,o.a.createElement(h.a,{block:!0,color:"link",className:"text-left m-0 p-0",onClick:this.toggle,"aria-expanded":this.state.collapse},o.a.createElement("strong",null,"Status"))),o.a.createElement(E.a,{isOpen:!this.state.collapse},o.a.createElement(g.a,null,o.a.createElement("pre",null,o.a.createElement("code",null,this.state.status))),o.a.createElement(f.a,null,o.a.createElement(h.a,{className:"text-white bg-cyan",type:"submit",size:"sl",onClick:this.toggleButton},o.a.createElement("i",{className:"fa fa-refresh"})," Reload"))))}}]),a}(c.Component),S=a(756),x=a(757),O=a(758),N=a(585),k=a(574),w=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).handleSwitch=function(){s.inputVideo.value=!s.inputVideo.value},s.handleText=function(e){var t=e.target.value;e.target.validity.valid&&(s.inputVideo.name=t)},s.toggle=function(){s.setState({collapse:!s.state.collapse})},s.sendVideo=function(){v.store.addNotification(Object(n.a)({title:"Video",message:"Invio del pacchetto video alla bici"},b)),s.props.reloadStatus(s.inputVideo)},s.state={collapse:!1},s.inputVideo={dest:s.props.dest,type:"7",value:s.props.value,name:""},s}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement(d.a,null,o.a.createElement(p.a,null,o.a.createElement(h.a,{block:!0,color:"link",className:"text-left m-0 p-0",onClick:this.toggle,"aria-expanded":this.state.collapse},o.a.createElement("strong",null,"Video"))),o.a.createElement(E.a,{isOpen:!this.state.collapse},o.a.createElement(g.a,null,o.a.createElement(S.a,{action:"",encType:"multipart/form-data",className:"form-horizontal"},o.a.createElement(x.a,{row:!0},o.a.createElement(u.a,{md:"9"},o.a.createElement(O.a,null,"Registrazione")),o.a.createElement(u.a,{md:"3"},o.a.createElement(k.d,{className:"mx-1",variant:"pill",color:"primary",outline:"alt",label:!0,checked:this.props.value,onChange:this.handleSwitch}))),o.a.createElement(x.a,{row:!0},o.a.createElement(u.a,{md:"5"},o.a.createElement(O.a,null,"File")),o.a.createElement(u.a,{md:"7"},o.a.createElement(N.a,{className:"text-center",type:"text",pattern:"*",placeholder:"Inserire nome del file video",onChange:this.handleText}))))),o.a.createElement(f.a,null,o.a.createElement(m.a,null,o.a.createElement(u.a,{md:"9"},o.a.createElement(h.a,{type:"submit","data-dismiss":"alert",size:"sl",color:"primary",onClick:this.sendVideo},o.a.createElement("i",{className:"fa fa-sign-out"})," Send"),"\u2002")))))}}]),a}(c.Component),j=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).toggle=function(){s.setState({collapse:!s.state.collapse})},s.sendRasp=function(e){v.store.addNotification(Object(n.a)({title:"Raspberry",message:"Invio del pacchetto raspberry alla bici"},b)),s.inputRasp.value=e,s.props.reloadStatus()},s.state={collapse:!1},s.inputRasp={dest:s.props.dest,type:"6",value:""},s}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement(d.a,null,o.a.createElement(p.a,null,o.a.createElement(h.a,{block:!0,color:"link",className:"text-left m-0 p-0",onClick:this.toggle,"aria-expanded":this.state.collapse},o.a.createElement("strong",null,"Raspberry"))),o.a.createElement(E.a,{isOpen:!this.state.collapse},o.a.createElement(g.a,null,o.a.createElement(m.a,null,o.a.createElement(u.a,{xs:"7",md:"8",xl:"9"},o.a.createElement(h.a,{type:"submit","data-dismiss":"alert",size:"sl",color:"danger",onClick:this.sendRasp.bind(this,"0")},o.a.createElement("i",{className:"fa fa-power-off"})," Spegni")),o.a.createElement(u.a,{xs:"5",md:"4",xl:"3"},o.a.createElement(h.a,{className:"text-white",type:"submit","data-dismiss":"alert",size:"sl",color:"warning",onClick:this.sendRasp.bind(this,"1")},o.a.createElement("i",{className:"fa fa-refresh"})," Riavvia"))))))}}]),a}(c.Component),C=function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var s;return Object(l.a)(this,a),(s=t.call(this,e)).handleSwitch=function(e){var t=s.inputSettings,a=!t[e];t[e]=a},s.handleText=function(e,t){var a=s.inputSettings,n=t.target.value;t.target.validity.valid&&(a[e]=n)},s.toggle=function(){s.setState({collapse:!s.state.collapse})},s.saveSettings=function(){v.store.addNotification(Object(n.a)({title:"Settings",message:"Invio del pacchetto settings alla bici"},b)),s.inputSettings.update=function(){var e=new Date;return(e.toLocaleTimeString()+"_"+e.toLocaleDateString("it-IT",{month:"2-digit",day:"2-digit"})).replace("/","-")}(),s.props.reloadStatus(s.inputSettings)},s.state={collapse:!1},s.inputSettings=JSON.parse(JSON.stringify(s.props.settings)),s}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement(d.a,null,o.a.createElement(p.a,null,o.a.createElement(h.a,{block:!0,color:"link",className:"text-left m-0 p-0",onClick:this.toggle,"aria-expanded":this.state.collapse},o.a.createElement("strong",null,"Impostazioni"))),o.a.createElement(E.a,{isOpen:!this.state.collapse},o.a.createElement(g.a,null,o.a.createElement(S.a,{action:"",encType:"multipart/form-data",className:"form-horizontal"},o.a.createElement(x.a,{row:!0},o.a.createElement(u.a,{md:"9"},o.a.createElement(O.a,null,"Log")),o.a.createElement(u.a,{md:"3"},o.a.createElement(k.d,{className:"mx-1",variant:"pill",color:"primary",outline:"alt",label:!0,onChange:this.handleSwitch.bind(this,"log"),checked:this.props.settings.log}))),o.a.createElement(x.a,{row:!0},o.a.createElement(u.a,{md:"9"},o.a.createElement(O.a,null,"Csv")),o.a.createElement(u.a,{md:"3"},o.a.createElement(k.d,{className:"mx-1",variant:"pill",color:"primary",outline:"alt",label:!0,onChange:this.handleSwitch.bind(this,"csv"),checked:this.props.settings.csv}))),o.a.createElement(x.a,{row:!0},o.a.createElement(u.a,{md:"9"},o.a.createElement(O.a,null,"Ant")),o.a.createElement(u.a,{md:"3"},o.a.createElement(k.d,{className:"mx-1",variant:"pill",color:"primary",outline:"alt",label:!0,onChange:this.handleSwitch.bind(this,"ant"),checked:this.props.settings.ant}))),o.a.createElement(x.a,{row:!0},o.a.createElement(u.a,{md:"9"},o.a.createElement(O.a,null,"Potenza media")),o.a.createElement(u.a,{md:"3"},o.a.createElement(N.a,{className:"text-center",type:"number",min:"0",pattern:"",defaultValue:this.props.settings.potenza,onChange:this.handleText.bind(this,"potenza")}))),o.a.createElement(x.a,{row:!0},o.a.createElement(u.a,{md:"9"},o.a.createElement(O.a,null,"Led Mode")),o.a.createElement(u.a,{md:"3"},o.a.createElement(N.a,{className:"text-center",type:"number",min:"0",pattern:"[0-9]*",defaultValue:this.props.settings.led,onChange:this.handleText.bind(this,"led")}))),o.a.createElement(x.a,{row:!0},o.a.createElement(u.a,{md:"9"},o.a.createElement(O.a,null,"Circonferenza")),o.a.createElement(u.a,{md:"3"},o.a.createElement(N.a,{className:"text-center",type:"number",min:"0",pattern:"[0-9]*",defaultValue:this.props.settings.circonferenza,onChange:this.handleText.bind(this,"circonferenza")}))),o.a.createElement(x.a,{row:!0},o.a.createElement(u.a,{md:"9"},o.a.createElement(O.a,null,"Valore calibrazione")),o.a.createElement(u.a,{md:"3"},o.a.createElement(N.a,{className:"text-center",type:"number",min:"0",pattern:"[0-9]*",defaultValue:this.props.settings.calibration_value,onInput:this.handleText.bind(this,"calibration_value")}))),o.a.createElement(x.a,{row:!0},o.a.createElement(u.a,{md:"9"},o.a.createElement(O.a,null,"Run")),o.a.createElement(u.a,{md:"3"},o.a.createElement(N.a,{className:"text-center",type:"number",min:"0",pattern:"[0-9]*",defaultValue:this.props.settings.run,onInput:this.handleText.bind(this,"run")}))))),o.a.createElement(f.a,null,o.a.createElement(m.a,null,o.a.createElement(u.a,{xs:"6",md:"9"},o.a.createElement(h.a,{type:"submit","data-dismiss":"alert",size:"sl",color:"success",onClick:this.saveSettings},o.a.createElement("i",{className:"fa fa-download"})," Save"),"\u2002"),o.a.createElement(u.a,{xs:"6",md:"3"},o.a.createElement("div",{className:"text-center"},this.props.settings.update.replace("_","\n")))))))}}]),a}(c.Component),V=a(257),_=(c.Component,function(e){Object(i.a)(a,e);var t=Object(r.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.updateView=function(e){n.reloadStatus(e)},n.loading=function(){return o.a.createElement("div",{className:"animated fadeIn pt-1 text-center"},"Loading...")},n.state={settings:{dest:"0",type:"3",circonferenza:"450",run:"4",log:!0,csv:!1,ant:!0,potenza:"18",led:"7",p13:!1,led_mode:"7",circumference:"5",calibration:!0,calibration_value:"14",update:"12:00:00_01:01"},state:{dest:"0",type:"1",log:!0,video:!1,ant:!0,video_running:!1,video_recording:!1,powermeter_running:!1,heartrate_running:!1,speed_running:!0,calibration:!1},visible:!1,visible_video:!1,visible_rasp:!1},n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"reloadStatus",value:function(e){var t;void 0!==e&&("7"===e.type&&(t=Object(n.a)({},this.state.state,{video_recording:e.value}),this.setState({state:t})),"3"===e.type&&(t=e,this.setState({settings:t})))}},{key:"render",value:function(){return""===this.state.state||""===this.state.settings?null:o.a.createElement("article",null,o.a.createElement(m.a,null,o.a.createElement(u.a,{xs:"12",xl:"4"},o.a.createElement(y,{settings:this.state.settings,state:this.state.state,reloadStatus:this.updateView})),o.a.createElement(u.a,{xs:"12",xl:"4"},o.a.createElement(w,{value:this.state.state.video_recording,dest:this.state.state.dest,reloadStatus:this.updateView}),o.a.createElement(j,{dest:this.state.state.dest,reloadStatus:this.updateView})),o.a.createElement(u.a,{xs:"12",xl:"4"},o.a.createElement(C,{settings:this.state.settings,reloadStatus:this.updateView}))))}}]),a}(c.Component));t.default=_}}]);
//# sourceMappingURL=44.35e17b10.chunk.js.map